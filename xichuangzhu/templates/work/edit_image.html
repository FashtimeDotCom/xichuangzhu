{% extends "layout.html" %}
{% from "macro/form.html" import field_errors %}
{% from "macro/ui.html" import upload_work_image %}

{% block page_title %}编辑图片{% endblock %}
{% block page_id %}page-edit-work-image{% endblock %}

{% block body %}
   <div class="row">
      <div class="col-sm-9">
         <h2 class="legend legend-lg">编辑图片</h2>
      </div>

      <div class="col-sm-8">
         <form class="form-horizontal" method="post"
               action="{{ url_for('work.edit_image', work_image_id=work_image.id) }}"
               enctype="multipart/form-data">
            <fieldset>

               {{ form.csrf_token }}

               <div class="form-group">
                  <label class="control-label col-md-2">原图</label>

                  <div class="col-md-10">
                     <img src="{{ work_image.url }}" class='img-responsive'/>
                  </div>
               </div>

               <div class="form-group">
                  <label class="control-label col-md-2">新图</label>

                  <div class="col-md-8 form-control-static">
                     <img class="preview" src="" alt=""/>

                     <div class="progress">
                        <div class="progress-bar" style="width: 0%;"></div>
                     </div>
                     {{ field_errors(form.image) }}
                     <button type="button" class="btn btn-default btn-xs" id="btn-upload-image">
                        选择图片
                     </button>
                     {{ form.image }}
                  </div>
               </div>

               <div class="form-group">
                  <div class="col-md-6 col-md-offset-2">
                     <input type="submit" value="保存" class="btn btn-sm btn-primary"/>
                  </div>
               </div>
            </fieldset>
         </form>
      </div>
   </div>

   {{ upload_work_image() }}

{% endblock %}